:root {
    --color-canvas-default: #f6f8fa;
    --color-canvas-subtle: #ffffff;
    --color-canvas-inset: #f1f4f8;
    --color-border-default: #d0d7de;
    --color-border-muted: #d8dee4;
    --color-border-strong: #afb8c1;
    --color-fg-default: #1f2328;
    --color-fg-muted: #656d76;
    --color-fg-on-emphasis: #ffffff;
    --color-accent-fg: #0969da;
    --color-accent-emphasis: #0550ae;
    --color-accent-muted: rgba(9, 105, 218, 0.1);
    --color-success-fg: #1f883d;
    --color-danger-fg: #cf222e;
    --color-neutral-muted: rgba(175, 184, 193, 0.4);
    --shadow-card: 0 1px 0 rgba(27, 31, 36, 0.04);
    --shadow-panel: 0 3px 6px rgba(140, 149, 159, 0.15);
    --radius-sm: 4px;
    --radius-md: 6px;
    --radius-lg: 12px;
    --surface-bg-default: var(--color-canvas-subtle);
    --surface-border-default: 1px solid var(--color-border-default);
    --surface-radius-default: var(--radius-lg);
    --interactive-radius: var(--radius-md);
    --font-stack: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
    --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
    --button-gap: 0.5rem;
}

* {
    box-sizing: border-box;
}

html {
    height: auto;
    overflow: auto;
}

body {
    margin: 0;
    min-height: 100vh;
    background: var(--color-canvas-default);
    color: var(--color-fg-default);
    font-family: var(--font-stack);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    display: flex;
    flex-direction: column;
}

main {
    flex: 1;
}

a {
    color: var(--color-accent-fg);
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

img {
    max-width: 100%;
    height: auto;
}

h1, h2, h3, h4 {
    margin: 0 0 0.5rem;
    line-height: 1.25;
    font-weight: 600;
}

p {
    margin: 0 0 0.85rem;
    color: var(--color-fg-muted);
}

p:last-child {
    margin-bottom: 0;
}

.container {
    width: min(1150px, 92%);
    margin: 0 auto;
    position: relative;
    overflow: visible;
}

.page {
    padding: 2.5rem 0 3.5rem;
}

@media (max-width: 640px) {
    .container {
        width: 94%;
    }

    .page {
        padding: 1.5rem 0 2rem;
    }

    .panel {
        --surface-padding: 1rem;
    }

    .panel-heading h2 {
        font-size: 1.15rem;
    }

    .drop-zone {
        padding: 1.25rem;
    }

    .drop-zone-title {
        font-size: 1rem;
    }
}

:where(button, .btn, .nav-link, .nav-empty, .tool-card a.btn-link) {
    --btn-bg: var(--color-canvas-subtle);
    --btn-border: 1px solid var(--color-border-default);
    --btn-color: var(--color-fg-default);
    --btn-shadow: none;
    border-radius: var(--interactive-radius);
    font-family: var(--font-stack);
    font-size: 0.95rem;
    font-weight: 500;
    border: var(--btn-border);
    background: var(--btn-bg);
    color: var(--btn-color);
    padding: 0.45rem 0.95rem;
    cursor: pointer;
    transition: background 0.2s ease, border 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    min-height: 34px;
    box-shadow: var(--btn-shadow);
}

button:focus-visible {
    outline: 2px solid var(--color-accent-fg);
    outline-offset: 2px;
}

.primary {
    --btn-bg: var(--color-accent-fg);
    --btn-border: 1px solid rgba(9, 105, 218, 0.45);
    --btn-color: var(--color-fg-on-emphasis);
    --btn-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.18), 0 1px 0 rgba(27, 31, 36, 0.1);
}

.primary:hover {
    --btn-bg: var(--color-accent-emphasis);
}

.secondary:hover {
    --btn-bg: var(--color-canvas-inset);
}

.ghost {
    --btn-bg: transparent;
    --btn-border: 1px solid var(--color-border-default);
}

.ghost:hover {
    --btn-bg: var(--color-canvas-inset);
    --btn-border: 1px solid var(--color-border-muted);
}

.small-button {
    font-size: 0.85rem;
    padding: 0.3rem 0.6rem;
}

textarea, input, select, .manual-input, .manual-field input, .manual-field select, .lookup-input, .month-select, pre {
    width: 100%;
    border: 1px solid var(--color-border-default);
    border-radius: var(--radius-md);
    padding: 0.75rem;
    font-family: var(--font-stack);
    font-size: 0.95rem;
    background: var(--color-canvas-subtle);
    color: var(--color-fg-default);
    transition: border 0.2s ease, box-shadow 0.2s ease;
}

textarea:focus, input:focus, select:focus, .lookup-input:focus {
    border-color: var(--color-accent-fg);
    box-shadow: 0 0 0 3px rgba(9, 105, 218, 0.15);
    outline: none;
}

select, .manual-field select, .month-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg width='12' height='12' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill='none' stroke='%23656d76' stroke-width='1.4' d='M4 6l4 4 4-4'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 0.65rem center;
    background-size: 12px;
    padding-right: 2rem;
}

textarea {
    min-height: 210px;
    resize: vertical;
}

textarea[readonly] {
    background: var(--color-canvas-default);
}

input::placeholder, textarea::placeholder {
    color: #8c959f;
}

code {
    font-family: var(--font-mono);
    font-size: 0.9rem;
    background: var(--color-canvas-inset);
    padding: 0.1rem 0.35rem;
    border-radius: var(--radius-sm);
    border: 1px solid var(--color-border-muted);
    color: var(--color-fg-default);
}

.site-nav {
    background: transparent;
    box-shadow: none;
}

.nav-shell {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 0.75rem 0;
    min-height: 80px;
}

.nav-links {
    display: flex;
    gap: 0.45rem;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
}

.nav-link {
    text-decoration: none;
    color: var(--color-fg-default);
}

.nav-home-link {
    flex: 0 0 auto;
    white-space: nowrap;
}

.nav-link-pop-in {
    animation: navPinPopIn 240ms ease-out;
}

.nav-link-pop-out {
    animation: navPinPopOut 240ms ease-in forwards;
}

.nav-link:not(.active):hover, .nav-link:not(.active):focus-visible {
    --btn-bg: var(--color-canvas-inset);
    --btn-border: 1px solid var(--color-border-muted);
    color: var(--color-fg-default);
}

.nav-link.active, .nav-link[aria-current="page"] {
    --btn-bg: linear-gradient(180deg, #ffffff 0%, #f6f8fa 100%);
    --btn-border: 1px solid var(--color-border-default);
    --btn-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.9), 0 1px 0 rgba(27, 31, 36, 0.04), 0 0 0 1px rgba(27, 31, 36, 0.02);
    color: var(--color-fg-default);
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.7);
}

@keyframes navPinPopIn {
    0% { transform: scale(0.65); opacity: 0; }
    70% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes navPinPopOut {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(0.65); opacity: 0; }
}

.site-nav a:hover, .site-nav a:focus-visible {
    text-decoration: none;
}

.nav-empty {
    --btn-bg: var(--color-canvas-default);
    --btn-border: 1px dashed var(--color-border-muted);
    --btn-color: var(--color-fg-muted);
    --btn-shadow: none;
    cursor: default;
    transition: none;
}

:where(.panel, .tool-card, .analysis-panel, .change-list, .history-list, .table-preview) {
    border: var(--surface-border, var(--surface-border-default));
    border-radius: var(--surface-radius, var(--surface-radius-default));
    background: var(--surface-bg, var(--surface-bg-default));
    padding: var(--surface-padding, 0);
    box-shadow: var(--surface-shadow, none);
}

.workspace {
    display: grid;
    gap: 2rem;
}

.panel {
    --surface-padding: 1.5rem;
    --surface-radius: var(--radius-lg);
    --surface-shadow: var(--shadow-card), var(--shadow-panel);
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.panel:hover {
    border-color: var(--color-border-muted);
}

.panel-heading {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
}

.panel-heading h2 {
    margin: 0;
    font-size: 1.3rem;
}

.panel-heading p, .panel-heading .step-label {
    color: var(--color-fg-muted);
    margin: 0;
}

.manual-heading {
    flex-direction: row;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
}

.manual-header-actions {
    margin-left: auto;
}

.controls, .citation-controls, .converter-controls, .converter-buttons, .manual-actions, .output-actions, .history-actions, .history-controls, .contributor-actions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--button-gap);
    margin: 0;
    align-items: center;
}

.drop-zone {
    border: 2px dashed var(--color-border-default);
    border-radius: var(--radius-lg);
    padding: 1.75rem;
    background: var(--color-canvas-default);
    text-align: center;
    transition: border 0.2s ease, background 0.2s ease;
    color: var(--color-fg-muted);
}

.drop-zone:hover, .drop-zone:focus-within {
    border-color: var(--color-accent-fg);
    background: var(--color-canvas-inset);
}

.drop-zone.is-dragover {
    border-color: var(--color-accent-fg);
    background: var(--color-accent-muted);
}

.drop-zone-inner {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
    align-items: center;
}

.drop-zone-title {
    font-size: 1.15rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--color-fg-default);
}

.file-name {
    margin: 0.35rem 0;
    font-family: var(--font-mono);
    font-size: 0.9rem;
    color: var(--color-fg-muted);
}

.visually-hidden {
    position: absolute !important;
    height: 1px;
    width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space: nowrap;
}

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.hidden {
    display: none !important;
}

.site-footer {
    padding: 1.25rem 0;
    background: transparent;
}

.footer-shell {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    flex-wrap: wrap;
    text-align: center;
}

.footer-link {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    color: #6e7781;
    font-weight: 500;
    border-radius: 50%;
    padding: 0.35rem;
    transition: color 0.2s ease;
}

.footer-link:hover {
    text-decoration: none;
    color: var(--color-fg-default);
}

.footer-link svg {
    width: 18px;
    height: 18px;
    fill: currentColor;
}

.checkbox-container {
    display: inline-flex;
    align-items: center;
    padding: 0.45rem 0.75rem;
    border: 1px solid var(--color-border-default);
    border-radius: var(--radius-md);
    background: var(--color-canvas-default);
    min-height: 34px;
}

.checkbox-label {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.95rem;
    font-weight: 500;
    color: var(--color-fg-default);
    cursor: pointer;
    white-space: nowrap;
    margin: 0;
}

.checkbox-label input[type="checkbox"] {
    width: 1rem;
    height: 1rem;
    margin: 0;
    cursor: pointer;
    flex-shrink: 0;
}

.confirm-button, .danger-button {
    background: rgba(207, 34, 46, 0.12);
    border: 1px solid rgba(207, 34, 46, 0.5);
    color: #b42318;
}

.confirm-button:hover, .confirm-button:focus-visible, .danger-button:hover, .danger-button:focus-visible {
    background: rgba(207, 34, 46, 0.2);
    border-color: rgba(207, 34, 46, 0.7);
}

.confirm-button.confirming, .danger-button.confirming {
    background: #b42318;
    border-color: #8f1d13;
    color: #ffffff;
}

.eyebrow {
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--color-fg-muted);
    margin: 0 0 0.25rem;
}

@media (max-width: 900px) {
    .nav-shell {
        flex-direction: column;
        align-items: center;
    }
}

@media (max-width: 640px) {
    .panel, .drop-zone, .table-preview {
        padding: 1.1rem;
    }

    .controls, .citation-controls, .converter-controls, .converter-buttons, .manual-actions, .output-actions {
        flex-direction: column;
        align-items: stretch;
    }
}
